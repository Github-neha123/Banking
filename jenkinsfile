pipeline {
    agent any

    stages {

        stage('Clone Repository') {
            steps {
                git branch: 'master',
                    url: 'https://github.com/Github-neha123/Banking.git'
            }
        }

        stage('Check Python') {
            steps {
                sh '/c/Users/kmnehamaimuna/AppData/Local/Microsoft/WindowsApps/python3 --version'
            }
        }

        stage('Install Dependencies') {
            steps {
                // install requirements if any, ignore if empty
                sh '/c/Users/kmnehamaimuna/AppData/Local/Microsoft/WindowsApps/pip3 install -r requirements.txt || true'
            }
        }

        stage('Run Unit Tests') {
            steps {
                sh '/c/Users/kmnehamaimuna/AppData/Local/Microsoft/WindowsApps/python3 -m unittest discover'
            }
        }

        stage('Run Application (Optional)') {
            steps {
                echo ' Skipping interactive run in CI pipeline to avoid hanging.'
                // If you really want to run non-interactive tests, create a separate script without input()
            }
        }
    }

    post {
        success {
            echo ' Build & Tests Successful'
        }
        failure {
            echo ' Build Failed'
        }
    }
}